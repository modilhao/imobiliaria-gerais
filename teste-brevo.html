<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <title>Teste Brevo API</title>
</head>
<body>
    <h1>Teste de Conexão Brevo</h1>
    <button onclick="testarBrevo()">Testar Conexão</button>
    <div id="resultado"></div>

  <script>
        async function testarBrevo() {
            const resultado = document.getElementById('resultado');
            resultado.innerHTML = 'Testando conexão...';
            
            try {
                const response = await fetch('https://api.brevo.com/v3/contacts', {
                    method: 'POST',
                    headers: {
                        // Substitua por uma API key válida somente em ambiente controlado de testes
                        'api-key': '',
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({
                        email: 'teste@exemplo.com',
                        attributes: {
                            NOME: 'Teste',
                            ORIGEM: 'Teste - Console'
                        },
                        listIds: [5]
                    })
                });
                
                resultado.innerHTML = `Status: ${response.status}<br>`;
                console.info('Brevo response status:', response.status);
                
                if (response.ok) {
                    resultado.innerHTML += '✅ Conexão bem-sucedida!';
                } else {
                    const errorData = await response.json().catch(() => ({ message: 'Erro desconhecido' }));
                    console.error('Brevo error payload:', errorData);
                    resultado.innerHTML += `❌ Erro: ${errorData.message || response.statusText}`;
                }
            } catch (error) {
                console.error('Brevo network error:', error);
                resultado.innerHTML = `❌ Erro de conexão: ${error.message}`;
            }
        }

        // Executa automaticamente ao carregar para facilitar diagnóstico
        window.addEventListener('DOMContentLoaded', () => {
            try {
                testarBrevo();
            } catch (e) {
                console.error('Erro ao iniciar teste Brevo:', e);
            }
        });
  </script>
</body>
</html>